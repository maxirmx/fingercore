<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Fingerprinting</title>
    <script src="clientjs/client.base.min.js"></script>
</head>

<body>

<h2>Fingerprint test</h2>

<p>
<a href="#" id="fingerquery">Service query</a><br/>
<a href="#" id="fingerxhr">Ajax service query</a><br/>
<a href="#" id="storehst">Ajax store history</a><br/>
<a href="#" id="gethst">Ajax get history</a><br/>


<script>
    function randomString(length) {
        var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghiklmnopqrstuvwxyz'.split('');

        if (!length) {
            length = Math.floor(Math.random() * chars.length);
        }

        var str = '';
        for (var i = 0; i < length; i++) {
            str += chars[Math.floor(Math.random() * chars.length)];
        }
        return str;
    }

    const ClientJS = window.ClientJS;
    // Create a new ClientJS object
    const client = new ClientJS();

    // Get the client's fingerprint id
    const fingerprint = client.getFingerprint();

    // Print the 32bit hash id to the console
    console.log(fingerprint);

    document.getElementById("fingerquery").href="fingerquery.php?finger=" + fingerprint + "&chatid=" + randomString(16);
    document.getElementById("fingerxhr").href="fingerxhr.php?finger=" + fingerprint + "&chatid=" + randomString(16);
    document.getElementById("storehst").href="storehst.php?history=Какая-то история&chatid=" + randomString(16);
    document.getElementById("gethst").href="gethst.php?chatid=" + randomString(16);

</script>

</body>
</html>
